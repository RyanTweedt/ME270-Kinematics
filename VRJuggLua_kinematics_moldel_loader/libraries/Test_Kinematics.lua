--======================================================================================================================================================================--
--===========================================================================[ 270 Kinematics ]=========================================================================--
--======================================================================================================================================================================--
--[[
Author:		Ryan Tweedt
Date:		6/26/13
Version:	1.3
Description:
This function will add kinematics to files as specified by Input.lua
]]
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--                                                                       [ Initialize Variables ]                                                                       --
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------

local scale = ScaleFrom.inches
offsetx = 0.11
offsety = 0 

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--                                                                             [ Function ]                                                                             --
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
function Drive(direction, parts, filenames)

	local Rotations
	local Translations 
	Rotations, Translations = input(direction)
	
------------------------------------------------------------------------------[ Rotations ]-----------------------------------------------------------------------------
	
	for i = 1, table.getn(Rotations) do 
		for num,path in pairs(filenames) do
			if string.find(path, Rotations[i].Filename) then
					parts[path] = rotateAboutPoint{
						model = parts[path],
						axis = osg.Vec3d(0,0,1),
						angle = Rotations[i].Angle,
						point = Rotations[i].RotationPoint,
						scale = scale,
						offset = {x = offsetx, y = offsety, z = 0},
					}
			end
		end
	end

------------------------------------------------------------------------------[ Translations ]-----------------------------------------------------------------------------
	
	for i = 1, table.getn(Translations) do 
		for num,path in pairs(filenames) do
			if string.find(path, Translations[i].Filename) then
				parts[path]:setPosition(osg.Vec3d(Translations[i].X, Translations[i].Y, Translations[i].Z))
			end
		end
	end
		
	Actions.waitForRedraw()
end

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--                                                                                [ End ]                                                                               --
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------